{% extends 'blog/base.html' %}
{% load static %}

{% block content %}
    <div class="recipe">
        <div class="result-title">
            <span>Anzahl gefundene Rezepte:</span> {{ search_results.count }}<br>
            {% for attr, value in query.items %}
                <span>{{attr}}:</span> {{value}}<br>
            {% endfor %}
            <h3>Ergebnisse deiner erweiterten Suche</h3>
        </div>

        {% for recipe in search_results %}
            <div class="properties">
                <p>{% if recipe.is_vegan and recipe.is_veggie %} Vegan, Vegetarisch {% elif recipe.is_vegan %} Vegan
                    {% elif recipe.is_veggie %} Vegetarisch {% endif %}
                </p>
                {% if recipe.image %}
                    <img src="{{ recipe.image.url }}" onerror="this.style.display='none'" class="list-image" />
                {% endif %}
                <h2><a href="{% url 'recipe_detail' pk=recipe.pk %}">{{ recipe.title }}</a></h2>
                <h4>KATEGORIE</h4> {{ recipe.get_cuisine_display }}<br>
                <h4>ENTHALTENE ALLERGENE</h4> {{ recipe.contained_allergen }}<br>
            </div>
        {% empty %}
        <div class="properties">
            <br><p>Sorry, es wurden keine Rezepte zu deiner Suchanfrage gefunden :(</p>
        </div>
        {% endfor %}
    </div>
{% endblock %}